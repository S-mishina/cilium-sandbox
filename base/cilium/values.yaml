# Cilium Helm values for kind cluster
# https://docs.cilium.io/en/stable/helm-reference/

# kube-proxy replacement (kindでkubeProxyMode: noneにしたため必須)
kubeProxyReplacement: true

# kind用の設定
k8sServiceHost: cilium-lab-control-plane
k8sServicePort: 6443

# Hubble (observability)
hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true

# L7 proxy (Istio的なL7機能を使う場合)
l7Proxy: true

# eBPF設定
bpf:
  masquerade: true

# IPAM設定
ipam:
  mode: kubernetes

# Operator設定
operator:
  replicas: 1  # kind用に1に削減

# デバッグ用（学習時に便利）
debug:
  enabled: false

# Ingress Controller
ingressController:
  enabled: true
  loadbalancerMode: shared
  service:
    type: NodePort
    insecureNodePort: 30000
    secureNodePort: 30443

# Gateway API (hostNetwork mode)
gatewayAPI:
  enabled: true
  hostNetwork:
    enabled: true

# Envoy security context (privileged ports用)
envoy:
  securityContext:
    capabilities:
      keepCapNetBindService: true

# Egress Gateway
egressGateway:
  enabled: true

# WireGuard Encryption
encryption:
  enabled: true
  type: wireguard

# Bandwidth Manager
bandwidthManager:
  enabled: true
